<p style="color: green"><%= notice %></p>

<h1>Jobs</h1>

<div id="jobs">
  <% if @jobs.any? %>
    <% @jobs.each do |job| %>
      <div class="d-flex align-items-center mb-3">
        <!-- Left side: company name -->
        <div class="flex-grow-1">
          <div class="d-flex justify-content-between">
            <b><%= job.company_name %></b>
            <!-- Right side: date and time -->
            <small><%= local_time(job.created_at) %></small>
          </div>

          <!-- Progress bar below the company name and date -->
          <div class="progress mt-2">
            <div 
              class="progress-bar progress-bar-striped progress-bar-animated" 
              role="progressbar" 
              style="width: <%= job.progress %>%;" 
              aria-valuenow="<%= job.progress %>" 
              aria-valuemin="0" 
              aria-valuemax="100">
              <%= job.progress %>%
            </div>
          </div>

          <!-- Job ID below the progress bar -->
          <div class="mt-2">
            <i><%= job.id %></i>
          </div>
        </div>

        <!-- Buttons on the right side -->
        <div class="ms-2">
          <%= link_to "Start", job, class: "btn btn-secondary" %>
        </div>
        <div class="ms-2">
          <%= button_to "Stop", job, method: :delete, class: "btn btn-secondary" %>
        </div>
        <div class="ms-2">
          <%= link_to "View", job, class: "btn btn-secondary" %>
        </div>
      </div>
    <% end %>
  <% else %>
    <p>No jobs to show.</p>
  <% end %>
</div>

<%= link_to "New job", new_job_path, class: "btn btn-secondary" %>
